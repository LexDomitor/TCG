<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTG Tools</title>
<style>
body { margin:0; font-family:sans-serif; background:#111; color:white; display:flex; flex-direction:column; height:100vh; }
.info-bar { background:#444; padding:5px 10px; font-size:0.9rem; display:flex; justify-content:space-between; color:#eee; }
.toolbar { display:flex; align-items:center; justify-content:center; gap:20px; padding:10px; background:#222; flex-wrap:wrap; }
.btn { padding:8px 16px; border:none; border-radius:6px; color:white; font-weight:bold; cursor:pointer; }
.blue { background:#3b82f6; } .green { background:#22c55e; } .red { background:#ff3b3b; }
.life-wrapper { display:flex; flex:1; }
.player-container { flex:1; position:relative; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; border:5px solid black; box-sizing:border-box; min-width:100px; }
.life-bar { position:absolute; bottom:0; width:100%; background:green; transition:height 0.3s ease, background 0.3s ease; }
.player-number { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:4rem; font-weight:bold; z-index:2; }
.control-panel { display:flex; justify-content:center; gap:8px; margin-top:8px; flex-wrap:wrap; }
.reset-btn { display:none; margin-top:8px; background:#ff3b3b; border:none; border-radius:6px; padding:6px 12px; cursor:pointer; }
.hidden { display:none; }
.center-text { display:flex; flex:1; justify-content:center; align-items:center; font-size:2rem; }
</style>
</head>
<body>

<!-- INFO BAR -->
<div class="info-bar">
  <span>Last Updated: 2025-09-14 PST</span>
  <span id="userTime"></span>
</div>

<!-- HOME PAGE -->
<div id="home">
  <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:20px;">
    <button class="btn blue" onclick="showPage('lifeCounter')">MTG Life Counter</button>
    <button class="btn green" onclick="showPage('archnemesis')">MTG Archnemesis</button>
  </div>
</div>

<!-- LIFE COUNTER PAGE -->
<div id="lifeCounter" class="hidden" style="flex:1; display:flex; flex-direction:column;">
  <div class="toolbar">
    <div>
      <label>Preset: </label>
      <select id="presetSelect" onchange="updatePreset()">
        <option value="standard">STANDARD (20)</option>
        <option value="commander">COMMANDER (40)</option>
        <option value="custom">CUSTOM</option>
      </select>
      <input type="number" id="customLifeInput" class="hidden" placeholder="Custom Life" min="1" onchange="setCustomLife()">
    </div>
    <div>
      <label>Border Scale: </label>
      <button class="btn blue" onclick="adjustBorder(1)">+</button>
      <button class="btn green" onclick="adjustBorder(-1)">-</button>
    </div>
    <button class="btn blue" onclick="showPage('home')">Home</button>
  </div>

  <div class="life-wrapper">
    <div class="player-container" id="containerA">
      <div class="life-bar" id="barA"></div>
      <div class="player-number" id="lifeA">20</div>
      <div class="control-panel">
        <button class="btn blue" onclick="adjustLife('A','add')">+</button>
        <button class="btn green" onclick="adjustLife('A','subtract')">-</button>
        <input type="number" id="adjustAmountA" value="1" min="1">
        <button class="reset-btn" id="resetA" onclick="resetLife('A')">Reset HP</button>
      </div>
    </div>
    <div class="player-container" id="containerB">
      <div class="life-bar" id="barB"></div>
      <div class="player-number" id="lifeB">20</div>
      <div class="control-panel">
        <button class="btn blue" onclick="adjustLife('B','add')">+</button>
        <button class="btn green" onclick="adjustLife('B','subtract')">-</button>
        <input type="number" id="adjustAmountB" value="1" min="1">
        <button class="reset-btn" id="resetB" onclick="resetLife('B')">Reset HP</button>
      </div>
    </div>
  </div>
</div>

<!-- ARCHNEMESIS PAGE -->
<div id="archnemesis" class="hidden" style="flex:1; display:flex; flex-direction:column;">
  <div class="toolbar">
    <button class="btn blue" onclick="showPage('home')">Home</button>
  </div>
  <div class="center-text">IN CONSTRUCTION</div>
</div>

<script>
let lifeTotals = {A:20,B:20};
let maxLife = 20;
let borderScale = 5;

// USER TIME UPDATE
function updateUserTime(){
  const now = new Date();
  document.getElementById('userTime').textContent = 'User Time: '+now.toLocaleTimeString();
}
setInterval(updateUserTime,1000);
updateUserTime();

// PAGE SWITCH
function showPage(page){
  document.querySelectorAll('body > div').forEach(div=>div.classList.add('hidden'));
  document.getElementById(page).classList.remove('hidden');
  if(page==='lifeCounter'){
    const presetSelect = document.getElementById('presetSelect');
    if(maxLife===20) presetSelect.value='standard';
    else if(maxLife===40) presetSelect.value='commander';
    else presetSelect.value='custom';
    document.getElementById('customLifeInput').value = (presetSelect.value==='custom')?maxLife:'';
    updateLifeDisplay('A');
    updateLifeDisplay('B');
  }
}

// LIFE DISPLAY UPDATE
function updateLifeDisplay(player){
  const bar = document.getElementById('bar'+player);
  const life = lifeTotals[player];
  const percentage = Math.max(0, life/maxLife);
  const numberEl = document.getElementById('life'+player);
  const resetBtn = document.getElementById('reset'+player);
  
  bar.style.height = (percentage*100)+'%';
  if(life<=0){
    bar.style.background='black';
    resetBtn.style.display='inline-block';
  } else {
    bar.style.background = percentage<=0.25?'red':percentage<=0.75?'goldenrod':'green';
    resetBtn.style.display='none';
  }
  numberEl.textContent = life;
}

// LIFE ADJUST / RESET
function adjustLife(player,action){
  const amt=parseInt(document.getElementById('adjustAmount'+player).value)||1;
  lifeTotals[player]+=(action==='add'?amt:-amt);
  updateLifeDisplay(player);
}

function resetLife(player){
  lifeTotals[player]=maxLife;
  updateLifeDisplay(player);
}

// PRESETS
function updatePreset(){
  const preset=document.getElementById('presetSelect').value;
  const customInput=document.getElementById('customLifeInput');
  if(preset==='standard'){ customInput.classList.add('hidden'); maxLife=20; lifeTotals.A=lifeTotals.B=20; }
  else if(preset==='commander'){ customInput.classList.add('hidden'); maxLife=40; lifeTotals.A=lifeTotals.B=40; }
  else { customInput.classList.remove('hidden'); customInput.focus(); }
  updateLifeDisplay('A'); updateLifeDisplay('B');
}

// CUSTOM LIFE
function setCustomLife(){
  const val=parseInt(document.getElementById('customLifeInput').value);
  if(!isNaN(val)&&val>0){ maxLife=val; lifeTotals.A=lifeTotals.B=val; updateLifeDisplay('A'); updateLifeDisplay('B'); }
}

// BORDER SCALE ADJUST
function adjustBorder(factor){
  borderScale += factor;
  if(borderScale<1) borderScale=1;
  document.getElementById('containerA').style.borderWidth=borderScale+'px';
  document.getElementById('containerB').style.borderWidth=borderScale+'px';
}

// INIT
updateLifeDisplay('A');
updateLifeDisplay('B');
</script>

</body>
</html>
