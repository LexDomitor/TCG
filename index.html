<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTG Tools</title>
<style>
body { margin:0; font-family:sans-serif; background:#111; color:white; display:flex; flex-direction:column; height:100vh; }
.info-bar { background:#444; padding:5px 10px; font-size:0.9rem; display:flex; justify-content:space-between; color:#eee; }
.toolbar { display:flex; align-items:center; justify-content:center; gap:20px; padding:10px; background:#222; }
.btn { padding:8px 16px; border:none; border-radius:6px; color:white; font-weight:bold; cursor:pointer; }
.blue { background:#3b82f6; } .green { background:#22c55e; } .red { background:#ff3b3b; }
.life-wrapper { display:flex; flex:1; }
.player-container { flex:1; position:relative; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; border:5px solid black; box-sizing:border-box; min-width:100px; margin:5px; }
.life-bar { position:absolute; bottom:0; width:100%; background:green; transition:height 0.3s ease, background 0.3s ease; z-index:1; }
.player-number { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:4rem; font-weight:bold; z-index:2; pointer-events:none; }
.control-panel { display:flex; justify-content:center; align-items:center; gap:8px; margin-top:5px; z-index:3; }
.reset-btn { display:none; margin-left:10px; background:#ff3b3b; border:none; border-radius:6px; padding:6px 12px; cursor:pointer; }
.hidden { display:none; }
.center-text { display:flex; flex:1; justify-content:center; align-items:center; font-size:2rem; }
input[type=number] { width:60px; text-align:center; border-radius:4px; border:none; }
</style>
</head>
<body>

<!-- INFO BAR -->
<div class="info-bar">
  <span>Last Updated: 2025-09-14 PST</span>
  <span id="userDateTime"></span>
</div>

<!-- HOME PAGE -->
<div id="home">
  <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:20px;">
    <button class="btn blue" onclick="showPage('lifeCounter')">MTG Life Counter</button>
    <button class="btn green" onclick="showPage('archnemesis')">MTG Archnemesis</button>
  </div>
</div>

<!-- LIFE COUNTER PAGE -->
<div id="lifeCounter" class="hidden" style="flex:1; display:flex; flex-direction:column;">
  <div class="toolbar">
    <button class="btn green" onclick="showPage('archnemesis')">Go to Archnemesis</button>
  </div>

  <div class="life-wrapper">
    <div class="player-container" id="containerA">
      <div class="life-bar" id="barA"></div>
      <div class="player-number" id="lifeA">20</div>
      <div class="control-panel">
        <button class="btn green" onclick="adjustLife('A','subtract')">-</button>
        <input type="number" id="adjustAmountA" value="1" min="1">
        <button class="btn blue" onclick="adjustLife('A','add')">+</button>
        <button class="reset-btn" id="resetA" onclick="resetLife('A')">Reset HP</button>
      </div>
    </div>
    <div class="player-container" id="containerB">
      <div class="life-bar" id="barB"></div>
      <div class="player-number" id="lifeB">20</div>
      <div class="control-panel">
        <button class="btn green" onclick="adjustLife('B','subtract')">-</button>
        <input type="number" id="adjustAmountB" value="1" min="1">
        <button class="btn blue" onclick="adjustLife('B','add')">+</button>
        <button class="reset-btn" id="resetB" onclick="resetLife('B')">Reset HP</button>
      </div>
    </div>
  </div>
</div>

<!-- ARCHNEMESIS PAGE -->
<div id="archnemesis" class="hidden" style="flex:1; display:flex; flex-direction:column;">
  <div class="toolbar">
    <button class="btn blue" onclick="showPage('lifeCounter')">Back to Life Counter</button>
  </div>
  <div class="center-text">IN CONSTRUCTION</div>
</div>

<script>
let lifeTotals = {A:20,B:20};
let maxLife = 20;

// PAGE SWITCH
function showPage(page){
  document.querySelectorAll('body > div').forEach(div=>div.classList.add('hidden'));
  document.getElementById(page).classList.remove('hidden');
  if(page==='lifeCounter'){
    updateLifeDisplay('A');
    updateLifeDisplay('B');
  }
}

// LIFE DISPLAY UPDATE
function updateLifeDisplay(player){
  const bar = document.getElementById('bar'+player);
  const life = lifeTotals[player];
  const percentage = Math.max(0, life/maxLife);
  const numberEl = document.getElementById('life'+player);
  const resetBtn = document.getElementById('reset'+player);
  
  bar.style.height = (percentage*100)+'%';
  if(life<=0){
    bar.style.background='black';
    resetBtn.style.display='inline-block';
  } else {
    bar.style.background = percentage<=0.25?'red':percentage<=0.75?'goldenrod':'green';
    resetBtn.style.display='none';
  }
  numberEl.textContent = life;
}

// LIFE ADJUST / RESET
function adjustLife(player,action){
  const amt=parseInt(document.getElementById('adjustAmount'+player).value)||1;
  lifeTotals[player]+=(action==='add'?amt:-amt);
  updateLifeDisplay(player);
}

function resetLife(player){
  lifeTotals[player]=maxLife;
  updateLifeDisplay(player);
}

// DATE & TIME FORMATTING
function getDateSuffix(day){
  if(day>=11 && day<=13) return 'th';
  switch(day%10){
    case 1: return 'st';
    case 2: return 'nd';
    case 3: return 'rd';
    default: return 'th';
  }
}

function updateUserDateTime(){
  const now = new Date();
  // Convert to PST
  const pstOffset = -7; // PDT is UTC-7
  const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
  const pstTime = new Date(utc + (3600000 * pstOffset));

  const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
  const month = months[pstTime.getMonth()];
  const day = pstTime.getDate();
  const suffix = getDateSuffix(day);
  const year = pstTime.getFullYear();

  const hours = String(pstTime.getHours()).padStart(2,'0');
  const minutes = String(pstTime.getMinutes()).padStart(2,'0');
  const seconds = String(pstTime.getSeconds()).padStart(2,'0');

  document.getElementById('userDateTime').textContent = `User Date: ${month} ${day}${suffix}, ${year} | User Time: ${hours}:${minutes}:${seconds}`;
}

setInterval(updateUserDateTime,1000);
updateUserDateTime();

// INIT
updateLifeDisplay('A');
updateLifeDisplay('B');
</script>

</body>
</html>
