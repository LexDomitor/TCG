<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTG Life Counter</title>
<style>
body { margin:0; font-family:sans-serif; background:#111; color:white; display:flex; flex-direction:column; height:100vh; justify-content:center; align-items:center;}
.btn { padding:12px 24px; border:none; border-radius:6px; color:white; font-weight:bold; cursor:pointer; margin:10px; font-size:1.2rem; }
.blue { background:#3b82f6; } .green { background:#22c55e; } .red { background:#ff3b3b; } 
.hidden { display:none; }

.life-wrapper { display:flex; flex:1; width:90%; gap:5px; margin-top:20px; }
.player-container { flex:1; position:relative; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; border:5px solid black; min-width:100px; margin:5px; box-sizing:border-box; }
.life-bar { position:absolute; bottom:0; width:100%; z-index:2; transition:height 0.2s ease; }
.trail-bar { position:absolute; bottom:0; width:100%; background:white; opacity:0.5; z-index:1; transition:height 0.5s ease; }
.player-number { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:3rem; font-weight:bold; z-index:3; pointer-events:none; }
.control-panel { display:flex; justify-content:center; align-items:center; gap:8px; margin-top:5px; z-index:4; }
input[type=number] { width:60px; text-align:center; border-radius:4px; border:none; }
</style>
</head>
<body>

<div id="mainMenu" style="display:flex; flex-direction:column; align-items:center;">
  <button class="btn blue" onclick="showPage('lifeCounter')">MTG Life Counter</button>
  <button class="btn green" onclick="showPage('archnemesis')">MTG Archnemesis</button>
</div>

<div id="lifeCounter" class="hidden" style="flex:1; display:flex; flex-direction:column; width:100%; align-items:center;">
  <div class="toolbar">
    <button class="btn green" onclick="showPage('mainMenu')">Back</button>
  </div>
  <div class="life-wrapper">
    <div class="player-container" id="containerA">
      <div class="trail-bar" id="trailA"></div>
      <div class="life-bar" id="barA" style="background:green;"></div>
      <div class="player-number" id="lifeA">20</div>
      <div class="control-panel">
        <button class="btn green" onclick="adjustLife('A','subtract')">-</button>
        <input type="number" id="adjustAmountA" value="1" min="1">
        <button class="btn blue" onclick="adjustLife('A','add')">+</button>
      </div>
    </div>
    <div class="player-container" id="containerB">
      <div class="trail-bar" id="trailB"></div>
      <div class="life-bar" id="barB" style="background:green;"></div>
      <div class="player-number" id="lifeB">20</div>
      <div class="control-panel">
        <button class="btn green" onclick="adjustLife('B','subtract')">-</button>
        <input type="number" id="adjustAmountB" value="1" min="1">
        <button class="btn blue" onclick="adjustLife('B','add')">+</button>
      </div>
    </div>
  </div>
</div>

<div id="archnemesis" class="hidden" style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center;">
  <div class="center-text" style="font-size:2rem; margin-bottom:20px;">IN CONSTRUCTION</div>
  <button class="btn blue" onclick="showPage('mainMenu')">Back to Main Menu</button>
</div>

<script>
let lifeTotals = {A:20,B:20};
let maxLife = {A:20,B:20};

function showPage(page){
  ['mainMenu','lifeCounter','archnemesis'].forEach(p=>document.getElementById(p).classList.add('hidden'));
  document.getElementById(page).classList.remove('hidden');
  if(page==='lifeCounter'){
    updateLifeDisplay('A');
    updateLifeDisplay('B');
  }
}

function adjustLife(player,action){
  const amt = parseInt(document.getElementById('adjustAmount'+player).value)||1;
  lifeTotals[player] += (action==='add'?amt:-amt);
  updateLifeDisplay(player);
}

function updateLifeDisplay(player){
  const bar = document.getElementById('bar'+player);
  const trail = document.getElementById('trail'+player);
  const life = lifeTotals[player];
  
  // clamp display height to maxLife starting height
  const percentage = Math.max(0, Math.min(life, maxLife[player]) / maxLife[player]);
  bar.style.height = (percentage*100)+'%';
  
  // color thresholds
  const ratio = life/maxLife[player];
  bar.style.background = ratio<=0.25?'red':ratio<=0.75?'goldenrod':'green';
  
  document.getElementById('life'+player).textContent = life;

  // trail bar animation (catch up slowly)
  const trailHeight = parseFloat(getComputedStyle(trail).height) / bar.parentElement.clientHeight;
  let current = trailHeight;
  const target = percentage;
  if(current > target){
    let step = current;
    const animate = setInterval(()=>{
      step -= 0.01;
      if(step <= target){
        step = target; clearInterval(animate);
      }
      trail.style.height = (step*100)+'%';
    },15);
  } else if(current < target){
    let step = current;
    const animate = setInterval(()=>{
      step += 0.01;
      if(step >= target){
        step = target; clearInterval(animate);
      }
      trail.style.height = (step*100)+'%';
    },15);
  }
}

// Initialize trail bars to full height
document.getElementById('trailA').style.height='100%';
document.getElementById('trailB').style.height='100%';
updateLifeDisplay('A');
updateLifeDisplay('B');
</script>
</body>
</html>
