<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Life Counter</title>
<style>
  html, body {
    margin:0; padding:0; height:100%; width:100%;
    background:#111; color:white; font-family:sans-serif;
    overflow:hidden; display:flex; flex-direction:column;
  }
  .info-bar {
    background:#444; color:lightgray;
    display:flex; justify-content:space-between;
    padding:3px 10px; font-size:0.7rem; /* smaller timestamp */
  }
  .format-bar {
    background:#333; padding:5px 10px; text-align:center;
  }
  select {
    background:transparent; color:lightgray;
    font-size:1.5rem; border:none; outline:none;
  }
  .life-wrapper {
    display:flex; flex:1; gap:10px; padding:0;
  }
  .player-container {
    flex:1; display:flex; flex-direction:column;
    align-items:center; justify-content:flex-start;
  }
  .name-field {
    width:100%; text-align:center;
    background:transparent; border:none; color:lightgray;
    font-size:2rem; margin-bottom:5px;
  }
  .bar-container {
    position:relative; width:90%; flex:1; min-height:0;
    border:5px solid black; display:flex; flex-direction:column;
    justify-content:flex-end; overflow:hidden; margin-bottom:5px;
  }
  .life-bar {
    position:absolute; bottom:0; width:100%; z-index:2;
    transition: height 0.2s ease;
  }
  .trail-bar {
    position:absolute; bottom:0; width:100%; z-index:1;
    background:white; transition: height 0.5s ease;
  }
  .player-number {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:3rem; font-weight:bold; z-index:3; pointer-events:none;
  }
  .control-panel {
    display:flex; justify-content:center; align-items:center; gap:8px;
    margin-bottom:5px;
  }
  input[type=number] {
    width:60px; text-align:center; border:none; background:transparent;
    color:lightgray; font-size:2rem; border-radius:4px;
  }
  .btn { padding:10px 20px; border:none; border-radius:6px; font-weight:bold; cursor:pointer; font-size:1rem; color:white; }
  .blue { background:#3b82f6; }
  .green { background:#22c55e; }
  .red { background:#ff3b3b; }
  .reset-btn { background:#888; margin-top:5px; display:none; }
</style>
</head>
<body>

<div class="info-bar">
  <span id="lastUpdated">Last Updated: September 15th, 2025 01:34 AM PST</span>
  <span id="yourTime"></span>
</div>

<div class="format-bar">
  FORMAT:
  <select id="formatSelect" onchange="changeFormat()">
    <option value="MTG Standard" selected>MTG Standard</option>
    <option value="MTG Commander">MTG Commander</option>
    <option value="YuGiOh">YuGiOh</option>
    <option value="YGO Speed Duel">YGO Speed Duel</option>
  </select>
</div>

<div class="life-wrapper">
  <div class="player-container">
    <input class="name-field" id="nameA" value="Player A">
    <div class="bar-container" id="containerA">
      <div class="trail-bar" id="trailA"></div>
      <div class="life-bar" id="barA"></div>
      <div class="player-number" id="lifeA">20</div>
    </div>
    <div class="control-panel">
      <button class="btn green" onclick="adjustLife('A','subtract')">-</button>
      <input type="number" id="adjustAmountA" value="1" min="1">
      <button class="btn blue" onclick="adjustLife('A','add')">+</button>
    </div>
    <button class="btn reset-btn" id="resetA" onclick="resetLife('A')">Reset</button>
  </div>

  <div class="player-container">
    <input class="name-field" id="nameB" value="Player B">
    <div class="bar-container" id="containerB">
      <div class="trail-bar" id="trailB"></div>
      <div class="life-bar" id="barB"></div>
      <div class="player-number" id="lifeB">20</div>
    </div>
    <div class="control-panel">
      <button class="btn green" onclick="adjustLife('B','subtract')">-</button>
      <input type="number" id="adjustAmountB" value="1" min="1">
      <button class="btn blue" onclick="adjustLife('B','add')">+</button>
    </div>
    <button class="btn reset-btn" id="resetB" onclick="resetLife('B')">Reset</button>
  </div>
</div>

<script>
let lifeTotals = {A:20,B:20};
let maxLife = {A:20,B:20};

function adjustLife(player,action){
  const amt = parseInt(document.getElementById('adjustAmount'+player).value)||1;
  lifeTotals[player] += (action==='add'?amt:-amt);
  updateLifeDisplay(player);
}

function resetLife(player){
  lifeTotals[player]=maxLife[player];
  updateLifeDisplay(player);
}

function updateLifeDisplay(player){
  const bar=document.getElementById('bar'+player);
  const trail=document.getElementById('trail'+player);
  const resetBtn=document.getElementById('reset'+player);
  let life=lifeTotals[player];
  if(life>maxLife[player]) life=maxLife[player];
  if(life<0) life=0;
  const percentage=life/maxLife[player];
  bar.style.height=(percentage*100)+'%';
  if(percentage<=0.25) bar.style.background='red';
  else if(percentage<=0.75) bar.style.background='goldenrod';
  else bar.style.background='green';
  document.getElementById('life'+player).textContent=lifeTotals[player];
  resetBtn.style.display=(lifeTotals[player]<=0)?'block':'none';

  if(trail.animation) clearInterval(trail.animation);
  trail.animation=setInterval(()=>{
    let current=parseFloat(trail.style.height||'100')/100;
    if(current>percentage) current-=0.02;
    else if(current<percentage) current+=0.02;
    if((current<=percentage && current>percentage-0.02)||(current>=percentage && current<percentage+0.02)){
      current=percentage; clearInterval(trail.animation);
    }
    trail.style.height=(current*100)+'%';
  },15);
}

function changeFormat(){
  const format=document.getElementById('formatSelect').value;
  let startingHP,incrementValue;
  switch(format){
    case 'MTG Standard': startingHP=20; incrementValue=1; break;
    case 'MTG Commander': startingHP=40; incrementValue=1; break;
    case 'YuGiOh': startingHP=8000; incrementValue=500; break;
    case 'YGO Speed Duel': startingHP=4000; incrementValue=500; break;
    default: startingHP=20; incrementValue=1;
  }
  lifeTotals['A']=startingHP;
  lifeTotals['B']=startingHP;
  maxLife['A']=startingHP;
  maxLife['B']=startingHP;
  document.getElementById('adjustAmountA').value=incrementValue;
  document.getElementById('adjustAmountB').value=incrementValue;
  updateLifeDisplay('A');
  updateLifeDisplay('B');
}

// live Your Time
function updateYourTime(){
  const now=new Date();
  const month=now.toLocaleString('en-US',{month:'long'});
  const day=now.getDate();
  const daySuffix=day==1||day==21||day==31?'st':(day==2||day==22?'nd':(day==3||day==23?'rd':'th'));
  const year=now.getFullYear();
  let hours=now.getHours();
  const minutes=now.getMinutes().toString().padStart(2,'0');
  const seconds=now.getSeconds().toString().padStart(2,'0');
  const ampm=(hours>=12?'PM':'AM');
  hours=hours%12; if(hours===0) hours=12;
  hours=hours.toString().padStart(2,'0');
  document.getElementById('yourTime').textContent=`Your Time: ${month} ${day}${daySuffix}, ${year} ${hours}:${minutes}:${seconds} ${ampm} PST`;
}

setInterval(updateYourTime,1000);
updateLifeDisplay('A');
updateLifeDisplay('B');
updateYourTime();

// mobile scroll hack to hide URL bar
window.addEventListener("load", function() {
  setTimeout(() => window.scrollTo(0, 1), 0);
});
</script>

</body>
</html>
